{"ast":null,"code":"var Mexp = require('./lexer.js');\n\nMexp.prototype.toPostfix = function () {\n  'use strict';\n\n  var post = [],\n      elem,\n      popped,\n      prep,\n      pre,\n      ele;\n  var stack = [{\n    value: \"(\",\n    type: 4,\n    pre: 0\n  }];\n  var arr = this.value;\n\n  for (var i = 1; i < arr.length; i++) {\n    if (arr[i].type === 1 || arr[i].type === 3 || arr[i].type === 13) {\n      //if token is number,constant,or n(which is also a special constant in our case)\n      if (arr[i].type === 1) arr[i].value = Number(arr[i].value);\n      post.push(arr[i]);\n    } else if (arr[i].type === 4) {\n      stack.push(arr[i]);\n    } else if (arr[i].type === 5) {\n      while ((popped = stack.pop()).type !== 4) {\n        post.push(popped);\n      }\n    } else if (arr[i].type === 11) {\n      while ((popped = stack.pop()).type !== 4) {\n        post.push(popped);\n      }\n\n      stack.push(popped);\n    } else {\n      elem = arr[i];\n      pre = elem.pre;\n      ele = stack[stack.length - 1];\n      prep = ele.pre;\n      var flag = ele.value == 'Math.pow' && elem.value == 'Math.pow';\n      if (pre > prep) stack.push(elem);else {\n        while (prep >= pre && !flag || flag && pre < prep) {\n          popped = stack.pop();\n          ele = stack[stack.length - 1];\n          post.push(popped);\n          prep = ele.pre;\n          flag = elem.value == 'Math.pow' && ele.value == 'Math.pow';\n        }\n\n        stack.push(elem);\n      }\n    }\n  }\n\n  return new Mexp(post);\n};\n\nmodule.exports = Mexp;","map":{"version":3,"sources":["/Users/alexwoolford/PycharmProjects/supply-chain-graph/app/web-react/node_modules/math-expression-evaluator/src/postfix.js"],"names":["Mexp","require","prototype","toPostfix","post","elem","popped","prep","pre","ele","stack","value","type","arr","i","length","Number","push","pop","flag","module","exports"],"mappings":"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","sourcesContent":["\r\nvar Mexp = require('./lexer.js');\r\n\r\nMexp.prototype.toPostfix = function () {\r\n\t'use strict';\r\n\tvar post = [], elem, popped, prep, pre, ele;\r\n\tvar stack = [{ value: \"(\", type: 4, pre: 0 }];\r\n\tvar arr = this.value;\r\n\tfor (var i = 1; i < arr.length; i++) {\r\n\t\tif (arr[i].type === 1 || arr[i].type === 3 || arr[i].type === 13) {\t//if token is number,constant,or n(which is also a special constant in our case)\r\n\t\t\tif (arr[i].type === 1)\r\n\t\t\t\tarr[i].value = Number(arr[i].value);\r\n\t\t\tpost.push(arr[i]);\r\n\t\t}\r\n\t\telse if (arr[i].type === 4) {\r\n\t\t\tstack.push(arr[i]);\r\n\t\t}\r\n\t\telse if (arr[i].type === 5) {\r\n\t\t\twhile ((popped = stack.pop()).type !== 4) {\r\n\t\t\t\tpost.push(popped);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (arr[i].type === 11) {\r\n\t\t\twhile ((popped = stack.pop()).type !== 4) {\r\n\t\t\t\tpost.push(popped);\r\n\t\t\t}\r\n\t\t\tstack.push(popped);\r\n\t\t}\r\n\t\telse {\r\n\t\t\telem = arr[i];\r\n\t\t\tpre = elem.pre;\r\n\t\t\tele = stack[stack.length - 1];\r\n\t\t\tprep = ele.pre;\r\n\t\t\tvar flag = ele.value == 'Math.pow' && elem.value == 'Math.pow';\r\n\t\t\tif (pre > prep) stack.push(elem);\r\n\t\t\telse {\r\n\t\t\t\twhile (prep >= pre && !flag || flag && pre < prep) {\r\n\t\t\t\t\tpopped = stack.pop();\r\n\t\t\t\t\tele = stack[stack.length - 1];\r\n\t\t\t\t\tpost.push(popped);\r\n\t\t\t\t\tprep = ele.pre;\r\n\t\t\t\t\tflag = elem.value == 'Math.pow' && ele.value == 'Math.pow';\r\n\t\t\t\t}\r\n\t\t\t\tstack.push(elem);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn new Mexp(post);\r\n};\r\nmodule.exports = Mexp;"]},"metadata":{},"sourceType":"script"}